[[http://www.gnu.org/software/guix/][GNU Guix]] (IPA: /ɡiːks/) is a purely functional package manager, and
associated free software distribution, for the [[http://www.gnu.org/gnu/gnu.html][GNU system]].

This repository contains Guix packages and system definitions for
software and systems specifically related to the [[https://www.gov.uk/government/organisations/government-digital-service][Government Digital
Service]].

* Getting started

See [[doc/installation.md][doc/installation.md]] for a full list of [[doc/installation.md#prerequisites][prerequisites]] and
[[doc/installation.md#steps][steps]]. The most reliable way to run the included scripts is via the
included govuk script. The bin directory can be added to your PATH for
easy access, for example:

#+BEGIN_SRC shell
  export $PATH="$PATH:$PWD/bin"
#+END_SRC

** Local Development

You can use govuk-guix to run GOV.UK services on your computer, for
example, to start a system with the Short URL Manager, Specialist
Publisher and any of their dependencies, you would run:

#+BEGIN_SRC shell
  govuk system start short-url-manager specialist-publisher
#+END_SRC

To find out more, read the documentation on
[[doc/local-development.md][local development]].

** Local Data

You can use govuk-guix to list, and load data downloaded through the
replication scripts in the govuk-puppet repository, for example, to
load the data for the short-url-manager service, you would run:

#+BEGIN_SRC shell
  govuk data load short-url-manager
#+END_SRC

To find out more, read the documentation on
[[doc/local-data.md][local data]].

* Hacking

When developing locally, you may find it useful to use a local copy of
GNU Guix, this can be done by setting the $GDS_GNU_GUIX_PATH
environment variable, for example:

#+BEGIN_SRC shell
  export GDS_GNU_GUIX_PATH="../gnu-guix"
#+END_SRC

This will be quite slow, as it builds the whole package again when any
changes are made, for quicker development, you can setup
$XDG_CONFIG_HOME/.local/guix/latest to link to the local copy of Guix
that you which to use. This will be done in the pre-inst-env script
with the value of $GDS_GUIX_CUSTOM_XDG_CONFIG_HOME if it is set, for
example:

#+BEGIN_SRC shell
  # Where $HOME/govuk/.config/guix/latest is the copy of Guix you wish
  # to use

  export GDS_GUIX_CUSTOM_XDG_CONFIG_HOME="$HOME/govuk/.config"
#+END_SRC
